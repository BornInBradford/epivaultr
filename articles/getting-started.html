<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started • epivaultr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epivaultr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/data-requests.html">Data requests</a></li>
    <li><a class="dropdown-item" href="../articles/features-concepts.html">Concepts and features</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting started</h1>
            
      

      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<p><a href="https://github.com/BornInBradford/epivaultr" class="external-link"><code>epivaultr</code></a>
is an R package used to extract data from EpiVault, the Born in Bradford
data warehouse. It can be used for quick grabs of specific variables
from specific tables. It can also be used to manage an entire data
request end to end, from reading a user’s requested variables, to
writing output files ready for shipping.</p>
<p>In this guide we will install <a href="https://github.com/BornInBradford/epivaultr" class="external-link"><code>epivaultr</code></a>,
connect to EpiVault, and do a quick extract of a couple of variables
from a single table.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><a href="https://github.com/BornInBradford/epivaultr" class="external-link"><code>epivaultr</code></a>
can be installed from GitHub using the <code>devtools</code>
package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"BornInBradford/epivaultr"</span><span class="op">)</span></span></code></pre></div>
<p>If a firewall is blocking the download of the source tarball, you may
be able to download and install a source zip manually as follows:</p>
<ul>
<li>Navigate to the <a href="https://github.com/BornInBradford/epivaultr" class="external-link"><code>epivaultr</code>
GitHub page</a>
</li>
<li>Down the right-hand side you’ll see the <em>Releases</em> listed.
Click on the <em>Release</em> you wish to install</li>
<li>Under <em>Assets</em> click <code>Source code (zip)</code> to
download the source zip and save it locally</li>
<li>Run the following command, substituting the local path to the source
zip:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_local</span><span class="op">(</span><span class="st">"path/to/source/zip"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="a-quick-extract">A quick extract<a class="anchor" aria-label="anchor" href="#a-quick-extract"></a>
</h2>
<p>The script below opens an EpiVault connection, extracts a couple of
variables, and disconnects from EpiVault.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://borninbradford.github.io/epivaultr/">epivaultr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ev_connect.html">ev_connect</a></span><span class="op">(</span>ev_server <span class="op">=</span> <span class="st">"BHTS-RESRCH22DV"</span>, ev_database <span class="op">=</span> <span class="st">"ResearchWarehouse"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ev_simple_fetch.html">ev_simple_fetch</a></span><span class="op">(</span><span class="va">con</span>, </span>
<span>                       project <span class="op">=</span> <span class="st">"BiB_CohortInfo"</span>, </span>
<span>                       table <span class="op">=</span> <span class="st">"ethnicity"</span>,</span>
<span>                       variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"participant_type"</span>, <span class="st">"ethsource"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ev_disconnect.html">ev_disconnect</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="bigger-data-extracts">Bigger data extracts<a class="anchor" aria-label="anchor" href="#bigger-data-extracts"></a>
</h2>
<p>The <code><a href="../reference/ev_simple_fetch.html">ev_simple_fetch()</a></code> function provides a convenient way
to quickly grab a small number of variables. If, however, your project
needs a large number of variables from across many tables, you may find
it easier to maintain a variables list in a separate file and read the
data in using this.</p>
<p>The script below reads a variable request specification from a
spreadsheet and extracts the data into a single container called an <a href="https://borninbradford.github.io/epivaultr/articles/features-concepts.html#ev_data---the-data-extract"><code>ev_data</code></a>
container.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read the requested variables into an `ev_variables` container called `vars`</span></span>
<span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_ev_variables.html">read_ev_variables</a></span><span class="op">(</span><span class="st">"tests/example_inputs/variables.xlsx"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract the data and metadata tables into an `ev_data` container called `dat`</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fetch_ev_data.html">fetch_ev_data</a></span><span class="op">(</span><span class="va">con</span>, <span class="va">vars</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="retrieving-data-from-a-bigger-extract">Retrieving data from a bigger extract<a class="anchor" aria-label="anchor" href="#retrieving-data-from-a-bigger-extract"></a>
</h3>
<p>The data in <code>dat</code> can be retrieved using the <a href="https://borninbradford.github.io/epivaultr/reference/index.html#get-data-from-containers"><code>get_</code></a>
functions.</p>
<div class="section level4">
<h4 id="get-the-names-of-the-data-tables">Get the names of the data tables<a class="anchor" aria-label="anchor" href="#get-the-names-of-the-data-tables"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_ev_data_names.html">get_ev_data_names</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="get-a-data-table">Get a data table<a class="anchor" aria-label="anchor" href="#get-a-data-table"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ev_data.html">get_ev_data</a></span><span class="op">(</span><span class="va">dat</span>, df_name <span class="op">=</span> <span class="st">"proj1.tab1"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="get-metadata">Get metadata<a class="anchor" aria-label="anchor" href="#get-metadata"></a>
</h4>
<p>Various types of metadata can also be accessed from the <a href="https://borninbradford.github.io/epivaultr/articles/features-concepts.html#ev_data---the-data-extract"><code>ev_data</code></a>
container.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get variable metadata</span></span>
<span><span class="va">meta1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ev_metadata.html">get_ev_metadata</a></span><span class="op">(</span><span class="va">dat</span>, type <span class="op">=</span> <span class="st">"variable"</span><span class="op">)</span></span>
<span><span class="co"># get category metadata</span></span>
<span><span class="va">meta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ev_metadata.html">get_ev_metadata</a></span><span class="op">(</span><span class="va">dat</span>, type <span class="op">=</span> <span class="st">"category"</span><span class="op">)</span></span>
<span><span class="co"># get table metadata</span></span>
<span><span class="va">meta3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ev_metadata.html">get_ev_metadata</a></span><span class="op">(</span><span class="va">dat</span>, type <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span></code></pre></div>
<p>For more information on retrieving data and metadata from an <a href="https://borninbradford.github.io/epivaultr/articles/features-concepts.html#ev_data---the-data-extract"><code>ev_data</code></a>
container, see the <a href="https://borninbradford.github.io/epivaultr/reference/index.html#get-data-from-containers">Reference</a>
section.</p>
<p>For a detailed walk-through of how to run a complete data request see
the <a href="https://borninbradford.github.io/epivaultr/articles/data-requests.html">Data
requests</a> article.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan Mason.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>

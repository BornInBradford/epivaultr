<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="epivaultr">
<title>Concepts and features • epivaultr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Concepts and features">
<meta property="og:description" content="epivaultr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">epivaultr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/getting-started.html">Getting started</a>
    <a class="dropdown-item" href="../articles/data-requests.html">Data requests</a>
    <a class="dropdown-item" href="../articles/features-concepts.html">Concepts and features</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Concepts and features</h1>
            
      
      
      <div class="d-none name"><code>features-concepts.Rmd</code></div>
    </div>

    
    
<p><a href="https://github.com/BornInBradford/epivaultr" class="external-link"><code>epivaultr</code></a>
is an R package used to extract data from EpiVault, the Born in Bradford
data warehouse. It can be used for quick grabs of specific variables
from specific tables. It can also be used to manage an entire data
request end to end, from reading a user’s requested variables, to
writing output files ready for shipping.</p>
<p>This guide explains various concepts and features employed by <a href="https://github.com/BornInBradford/epivaultr" class="external-link"><code>epivaultr</code></a>.</p>
<div class="section level2">
<h2 id="working-with-variables">Working with variables<a class="anchor" aria-label="anchor" href="#working-with-variables"></a>
</h2>
<div class="section level3">
<h3 id="variable-naming">Variable naming<a class="anchor" aria-label="anchor" href="#variable-naming"></a>
</h3>
<p>EpiVault organises data into projects, tables and variables with the
following properties:</p>
<ul>
<li>An instance of EpiVault contains projects.
<ul>
<li>Each project has a unique name <em>within its EpiVault
instance</em>
</li>
</ul>
</li>
<li>A project contains tables.
<ul>
<li>Each table has a unique name <em>within its project</em>.</li>
</ul>
</li>
<li>A table contains observations in rows and variables in columns. The
name of each column is the <em>variable name</em>.
<ul>
<li>Each variable has a unique name <em>within its table</em>.</li>
</ul>
</li>
</ul>
<p>As each variable has a unique name within its table, the <em>variable
name</em> can safely be used to refer to the variable within the context
of that table.</p>
<p>However, within the wider context of EpiVault, the <em>project
name</em> and <em>table name</em> are needed to uniquely refer to the
variable. We separate these with dots,
e.g. <code>project_name.table_name.variable_name</code>. We call this
the <em>fully qualified variable name</em>:</p>
<table class="table">
<colgroup>
<col width="42%">
<col width="40%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th>Reference type</th>
<th>Reference</th>
<th>Unique within</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><em>project name</em></td>
<td>BiB_CohortInfo</td>
<td>EpiVault</td>
</tr>
<tr class="even">
<td><em>table name</em></td>
<td>person_info</td>
<td>project (BiB CohortInfo)</td>
</tr>
<tr class="odd">
<td><em>variable name</em></td>
<td>Gender</td>
<td>table (person_info)</td>
</tr>
<tr class="even">
<td><em>fully qualified variable name</em></td>
<td>BiB_CohortInfo.person_info.Gender</td>
<td>EpiVault</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="variable-file-formats">Variable file formats<a class="anchor" aria-label="anchor" href="#variable-file-formats"></a>
</h3>
<p>Most data requests and complex projects will start by reading a
variable list from a file using <code><a href="../reference/read_ev_variables.html">read_ev_variables()</a></code>.</p>
<p>Although simple data requests can be run directly in code by adding
variables using <code><a href="../reference/make_ev_variables.html">make_ev_variables()</a></code> or doing a quick grab
using <code><a href="../reference/ev_simple_fetch.html">ev_simple_fetch()</a></code>, using a variables file is
considered more reproducible and future-proof.</p>
<p><code><a href="../reference/read_ev_variables.html">read_ev_variables()</a></code> supports delimited text or MS Excel
formats, which can be in one of the following structures:</p>
<table class="table">
<thead><tr class="header">
<th>Format</th>
<th>Column 1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Single column</td>
<td>Fully qualified variable name</td>
</tr>
<tr class="even">
<td>Three columns</td>
<td>project name</td>
</tr>
</tbody>
</table>
<p>A header row is optional and <code><a href="../reference/read_ev_variables.html">read_ev_variables()</a></code> will
skip over this if the column names are obvious,
e.g. <code>project</code>, <code>table</code>, <code>variable</code>,
<code>name</code> etc.</p>
<p>If <code><a href="../reference/read_ev_variables.html">read_ev_variables()</a></code> returns an empty result then it
may have encountered problems interpreting the structure. Try the
following:</p>
<ul>
<li><p>Remove the header row</p></li>
<li><p>Remove any blank rows from the middle of the variable
list</p></li>
<li><p>Make sure there are exactly one or three columns</p></li>
<li><p>If there is one column, make sure this contains fully qualified
variable names; if there are three columns, make sure these are project,
table and variable <em>in that order</em></p></li>
<li><p>If the file extension is <code>csv</code>, <code>txt</code>, or
<code>tsv</code>, it will try to read the file as a delimited text file,
e.g. comma- or tab-separated or fixed width. If it cannot determine th
delimiter it will try to read it line by line.</p></li>
</ul>
<div class="section level4">
<h4 id="wildcards">Wildcards<a class="anchor" aria-label="anchor" href="#wildcards"></a>
</h4>
</div>
</div>
</div>
<div class="section level2">
<h2 id="containers">Containers<a class="anchor" aria-label="anchor" href="#containers"></a>
</h2>
<div class="section level3">
<h3 id="ev_variables---the-data-request">
<code>ev_variables</code> - the data request<a class="anchor" aria-label="anchor" href="#ev_variables---the-data-request"></a>
</h3>
</div>
<div class="section level3">
<h3 id="ev_data---the-data-extract">
<code>ev_data</code> - the data extract<a class="anchor" aria-label="anchor" href="#ev_data---the-data-extract"></a>
</h3>
</div>
</div>
<div class="section level2">
<h2 id="variable-visibility">Variable visibility<a class="anchor" aria-label="anchor" href="#variable-visibility"></a>
</h2>
</div>
<div class="section level2">
<h2 id="required-columns">Required columns<a class="anchor" aria-label="anchor" href="#required-columns"></a>
</h2>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan Mason.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
